var theName = "",
    theGrade = "",
    theClass = "",
    theFaith = 0,
    theHardheaded = 0,
    theCharacteristic = "",
    theSecret = "";

on("chat:message", function(msg){

  if( msg.type == "api" && msg.content.indexOf("!ìºì´ë¦„") !== -1 ){
    
        var theContent = msg.content.replace("!ìºì´ë¦„ ", "");
        
        theName = theContent;
            
  }
  
  if( msg.type == "api" && msg.content.indexOf("!ìºí•™ë…„") !== -1 ){
    
        var theContent = msg.content.replace("!ìºí•™ë…„ ", "");
        
        theGrade = theContent;
            
  }
  
  if( msg.type == "api" && msg.content.indexOf("!ìºë°˜") !== -1 ){
    
        var theContent = msg.content.replace("!ìºë°˜ ", "");
        
        theClass = theContent;
            
  }
  
  if( msg.type == "api" && msg.content.indexOf("!ìºì‹ ì•™ì‹¬") !== -1 ){
    
        var theContent = msg.content.replace("!ìºì‹ ì•™ì‹¬ ", "");
        
        theFaith = parseInt( theContent );
            
  }
  
  if( msg.type == "api" && msg.content.indexOf("!ìºë³´ìˆ˜ì„±") !== -1 ){
    
        var theContent = msg.content.replace("!ìºë³´ìˆ˜ì„± ", "");
        
        theHardheaded = parseInt( theContent );
            
  }
  
  if( msg.type == "api" && msg.content.indexOf("!ìºì„±ê²©íŠ¹ì§•") !== -1 ){
    
        var theContent = msg.content.replace("!ìºì„±ê²©íŠ¹ì§• ", "");
        
        theCharacteristic = theContent;
            
  }
  
  if( msg.type == "api" && msg.content.indexOf("!ìºë¹„ì„¤") !== -1 ){
    
        var theContent = msg.content.replace("!ìºë¹„ì„¤ ", "");
        
        theSecret = theContent;
            
  }

  if( msg.type == "api" && msg.content.indexOf("!ìºë¦­í„°ìƒì„±") !== -1 ){
      
      createObj('character', {
          
          name : theName,
          inplayerjournals : "all",
          controlledby : "all"
          
      });
          
      var cutie = findObjs({type: 'character', name: theName})[0],
          cutieIs = cutie.get('name'),
          cutieId = cutie.get('id');
          
    sendChat( "character|" + cutieId, "!ìºë¦­í„°ì™„ì„±");
      
  }
    
    if( msg.type == "api" && msg.content.indexOf("!ìºë¦­í„°ì™„ì„±") !== -1 ){
    
      var allCuties = findObjs({type: 'character'});
      
      if ( allCuties.length == 1 ){
          
          var cutie = findObjs({type: 'character', name: msg.who})[0],
              cutieIs = cutie.get('name'),
              cutieId = cutie.get('id');
          
      }
      else {
          
          var cutie = findObjs({type: 'character', name: msg.who})[0],
              cutieIs = cutie.get('name'),
              cutieId = cutie.get('id');
          
      }
          
      cutie.set({
          
          bio : "<br> ğŸ’’ í•™ë…„/ë°˜ : " + theGrade + "í•™ë…„ " + theClass + "ë°˜<br> ğŸ’’ ì„±ê²©, íŠ¹ì§• : " + theCharacteristic
          
      });

      cutie.set({
          
          gmnotes : theSecret
          
      });
      
      sendChat( "", "/desc ğŸ’’ " + cutieIs + "ì´(ê°€) ì•„ë¦„ë‹¤ìš´ ê¸ˆë‹¨ì˜ ì •ì›ì— ë“¤ì–´ì™”ìŠµë‹ˆë‹¤. ì €ë„ì„ í™•ì¸í•˜ì„¸ìš”. ğŸ’’");      
      sendChat( "character|" + cutieId, "!ì–´ì„œì™€ " + cutieIs );
      
          
        createObj('attribute', {
            
            name: 'ì‹ ì•™ì‹¬',
            current: theFaith,
            max: 5,
            characterid: cutieId
        });
        
        createObj('attribute', {
            
            name: 'ë³´ìˆ˜ì  ê²½í–¥',
            current: theHardheaded,
            max: 9,
            characterid: cutieId 
            
        });
        
        createObj('attribute', {
            
            name: 'ì£„ì±…ê°',
            current: 1,
            max: 250,
            characterid: cutieId 
            
        });
        
        createObj('attribute', {
            
            name: 'ë°°ë•ê°',
            current: 2,
            max: 8,
            characterid: cutieId 
            
        });
      
        createObj('ability', {
            
            name: 'í–‰ìœ„ì‹¤í–‰',
            action: '!í–ˆë„¤í–ˆì–´ 0',
            characterid: cutieId 
            
        });
        
        createObj('ability', {
            
            name: 'í–‰ìœ„ê±°ë¶€',
            action: '!í• ë˜ë§ë˜ 0',
            characterid: cutieId 
            
        });
        
        createObj('ability', {
            
            name: 'ê¸°ë„',
            action: '!ê¸°ë„',
            characterid: cutieId 
            
        });
        
        createObj('ability', {
            
            name: 'ê³ í•´ì„±ì‚¬',
            action: '!ê³ í•´ì„±ì‚¬',
            characterid: cutieId 
            
        });
      
      sendChat( "character|" + cutieId, "!ì‹ ìºë“±ì¥");
      
    }
    
    if( msg.type == "api" && msg.content.indexOf("!ì‹ ìºë“±ì¥") !== -1 ){
        
        var cutie = findObjs({type: 'character', name: msg.who})[0],
            cutieIs = cutie.get('name'),
            cutieId = cutie.get('id'),
            allCuties = findObjs({ type: 'character'});
            
            if( allCuties.length == 1 ) return;
            else {            
                var lovelyOne = allCuties.find(function(obj) {
            
                    var theOne = obj.get('name');
                    return theOne !== msg.who;
                    
                    }),
                lovelyOneIs = lovelyOne.get('name'),
                lovelyOneId = lovelyOne.get('id');
                
            if ( lovelyOneIs == undefined ) return;
            else {
                
                createObj('attribute', {
                    name: lovelyOneIs + 'ì—ê²Œ ëŠë¼ëŠ” ëŒë¦¼',
                    current: 125,
                    max: 250,
                    characterid: cutieId
                });
                
                createObj('attribute', {
                    name: cutieIs + 'ì—ê²Œ ëŠë¼ëŠ” ëŒë¦¼',
                    current: 125,
                    max: 250,
                    characterid: lovelyOneId
                });
                
            }
            

            
        }
        
    }
    
    
});
